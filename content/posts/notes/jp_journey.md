---
title: '일본여행기'
date: '2023-08-06'
categories: ['일본여행기']
showToc: true
ShowBreadCrumbs: true
comments : true
draft : true
---

## 1.

6월 말에 일본엘 다녀왔다. 벌써 한 달 가까이 지났다. 그 한 달 동안에, 생각보다 많은 일들이 있었다. 뉴스레터 구독자 여러분들과 오프라인 미팅도 했고, 책도 출간됐으니까. 하루하루는 그렇게 무료할 수 없는데, 지나고 나서 되짚어보면 생각보다 알차 보인다. 분명 후자가 착시일 것이다.

일본 여행을 정리해야겠다는 생각이 들었다. 사실 여행을 떠나기 전 목표는 여행을 하면서 기록하는 거였다. 여행의 기억이 휘발되지 않도록 저녁마다 정리를 하려했지만, 그러지 못했다. 숙소에서 에어컨 빵빵하게 틀어놓고 유튜브 보는 게 그렇게 재밌더라. 여행을 마무리하고 집에 도착한 나. 아마 6월 30일 금요일이었을거다. 주말이 있으니까 이 때 정리해봐야지 했다. 하지만 그러지 못했다. 나이를 먹어서 그런지 체력 회복이 필요했다. '그래도 복귀 일주일 내에는 해야지…' 하고 마음 먹었다. 그러지 못했다. 생각보다 내 삶이 참 바쁘더라고. 한 달 내에는 정리를 하자 제발… 이제 기억력이 가물가물해서 한 달 지나면 기억도 못한다니까? 

그리고 8월 5일. 그러니까 여행을 다녀온 지 한 달 하고도 1주일이 지난 오늘에서야 첫 발을 뗀다. 시작이 곧 반이라고 했으니까. 이런 마음을 먹으면 스트레스를 받질 않는다. 물론 일본 여행기 정리가 오늘 다 정리되리라는 법은 없다. 

서두가 길었다. 절대 분량을 채우려는 속셈은 아니다. 분량, 뭐 길면 좋지만 짧다고 뭐라할 사람 없다. 다만 늦게 정리하는 만큼 가물가물한 내 기억 대신 다른 녀석의 힘을 빌려보려고 한다. 바로 Google이다. 나는 개인정보를 무척이나 소중하게 여기는 편인데, 그럼에도 불구하고 내 이럴 줄 알고 여행 기간 동안 Google 위치 기록 정보를 켜 두었다. 참 다행이다. 과거의 나에게 따봉 하나 보낸다.


## 2. 

계획적으로 삶을 사는 편이 아니다. 뒤늦게 글 정리 하는 걸 봐라. 데이터도 미리 주욱 뽑아놓고 분석한 게 아니다. 글 쓰다가 데이터 만지고, 또 글 쓰다가 데이터 만지고... 이 글을 쓰면서 구글에 들어가 데이터를 다운받았다. Google 테이크아웃이라는 기능이 있는 줄 처음 알았다. 여기에선 내 Google 계정의 데이터를 테이크아웃 할 수 있다.

***
*2023년 8월 5일에 요청하신 Google 데이터 사본 만들기가 완료되었습니다. 2023년 8월 12일까지 파일을 다운로드하실 수 있습니다. 다운로드에 다음 출처의 데이터가 포함됩니다.*
- *위치 기록*
***


내 위치 기록을 다운받았다. 다운로드 폴더에 들어가보니 takeout-20230805T091219Z-001.zip 파일이 있다. 압축을 풀어보면 이러한 디렉토리 구조를 가지고 있다.

```basic
.
├── Settings.json
├── Records.json
├── Tombstones.csv
└── Semantic Location History
    └── 2023
        └── 2023_JUNE.json
 ```

`Settings.json` 파일을 열어보면 내 Google 계정과 연결되어 있는 기기 정보가 주루룩 뜬다. 지금 사용하고 있는 아이폰 모델이 가장 위에 있다. device 항목에는 아이폰14 Pro의 ID인 “iPhone15,2” 값이 적혀있다. 이 모델만 있는 건 아니다. 이전에 사용한 아이폰12 mini의 흔적도 보인다. 내 개인정보가 이렇게 빠져나간다. 

`Records.json`을 열어본다. 이 파일에는 Google 지도가 기록한 모든 데이터가 들어가 있다. 

```json
{
  "locations": [{
    "latitudeE7": 357104584,
    "longitudeE7": 1397743146,
    "accuracy": 14,
    "velocity": 0,
    "heading": 95,
    "altitude": 10,
    "verticalAccuracy": 10,
    "deviceTag": XXXXXXXXXX,
    "platformType": "IOS",
    "serverTimestamp": "2023-06-23T06:01:15.613Z",
    "deviceTimestamp": "2023-06-23T06:01:15.205Z",
    "batteryCharging": false,
    "formFactor": "PHONE",
    "timestamp": "2023-06-23T05:51:43Z"
}]
}
```

LatitudeE7, longitudeE7은 이름 그대로, 위도와 경도에 E7을 곱한 값으로 보인다. E7은 10의 7제곱을 의미한다. 천 만이 곱해지면서 위경도의 소숫점이 사라졌다. accurcy는 정확도를 나타낸다. 숫자가 작을수록 정확도가 높다는 의미다. 그 외에도 속도(velocity), 방향(heading, 북쪽을 기준으로 360도) 고도(altitude) 정보도 확인할 수 있다.

일단 `Records.json` 파일로 확인할 수 있는 기본적인 위치정보를 가지고 시각화해보자. 내가 일본 어디어디를 다녔는지 Google은 알고 있으니까.

```r
library(jsonlite)
library(tidyverse)

records <- fromJSON("Records.json")
records_df <- as.data.frame(records)

records_df <- records_df |>
  mutate(latitude = locations.latitudeE7/10000000,
         longitude = locations.longitudeE7/10000000,
         serverTime = lubridate::ymd_hms(locations.serverTimestamp))
```

데이터 전처리와 시각화는 R을 이용해 진행한다. json 파일을 데이터프레임으로 만들고, 천 만이 곱해져있는 위도와 경도를 원래 모습으로 바꾸어주었다. 거기에 데이터가 기록된 시점(locations.serverTimestamp)이 제대로 인식될 수 있도록 시간 데이터(연월일시분초)로 바꿔줬다. 

이제 데이터가 준비되었으니, 이걸 가지고 지도에 뿌리면 될 거다. `ggmap` 라이브러리를 활용했다.

```r
library(ggplot2)
library(ggmap)

japan <- c(left = 139, right = 141, top = 36, bottom = 35.2)
japan_map <- get_stamenmap(japan, maptype = "toner-lite")

ggmap(japan_map) +
  geom_point(data = records_df,
             aes(x = longitude, y = latitude),
             color = "#FFCF00",
             alpha = 0.5) +
  theme_minimal()
```

우선 내가 다녀온 일본 영역을 담을 수 있는 맵박스를 만들었다. 이름은 `japan`. 그리고 `ggmap` 라이브러리에 있는 함수를 이용해 Stamen이 만든 지도를 불러왔다. 그리고 위에서 `Record.json`에서 정리한 데이터를 불러와 뿌리자.

![](/images/japan/japan.png)

오른쪽에 나리타 공항도 보이고 잘 그려졌다. 물론 중간 중간 요상한 점들도 보인다. 아마도 비행중에 위치 정보가 잡힌게 아닐까 싶다. 일단은 도쿄에 집중을 해보자. 조금 더 확대해서 그려본다. 맵 박스를 도쿄에 맞게 조정하고 `get_stamenmap` 함수에서 zoom을 이용해 지도 이미지의 해상도를 조절해보자.

```r
tokyo <- c(left = 139.6455, right = 139.8535, top = 35.7405, bottom = 35.6576)
tokyo_map <- get_stamenmap(tokyo, zoom = 14, maptype = "toner-lite")
```

![](/images/japan/tokyo.png)

닷새 동안의 도쿄 여행의 숙소는 우에노 근처의 비즈니스 호텔이었다. 그 근처에 노란 점이 가득한 걸 보니 제대로 잘 나온 것 같다. 사실 숙소가지고도 할 이야기가 태산이다. 가격이 문제였는데, 이건 나중에 자세하게 풀어볼 예정이다. 이보다 앞서 이야기 할 게 있다.

## 3.

쓰다 보니 일본을 먼저 정리할 게 아니라는 생각이 들었다. 여행의 시작은 공항 가는 길부터 시작이니까. 집에서 나와 캐리어를 끌고 인천공항까지 가는 길, 이것부터 정리해야겠다. 

6월 23일 인천에서 도쿄 나리타 공항으로 가는 비행기. 출발 시간은 10시 10분. 비행기를 놓치지 않겠다는 생각을 얼마나 했는지 모른다. 

아마 살면서 비행기를 놓쳐본 경험이 있는 사람은 많지 않을 거다. 나는 안타깝게도 비행기를 놓쳐봤다. 언젠지는 정확히 기억이 나질 않는다. 목적지는 기억이 난다. 일본 여행을 가려고 했었다. 저가 항공사인 피치 항공을 예약했고, 인천 공항에 도착했는데 탑승수속이 이미 끝나 있었다. 사실 공항 리무진을 타고 가는 길부터 낌새가 좋지 않았다. "아 시간 애매하겠는걸?", "왜 기사님은 속도를 내질 않는 거지?"라는 생각을 진짜 거짓말 안 하고 매 분 매 초 했던 것 같다.

물론 다시 항공권을 예약해서 일본을 갈 수도 있었지만 그러지 않았다. 캐리어를 다시 끌고 집으로 오는 기분, 아무도 모르겠지. 분명히 엄마한테 여행 다녀오겠다고 기분 좋게 인사하고 나섰는데, 채 3시간도 되질 않아 캐리어를 끌고 나타나는 자식 놈의 심정. 엄마는 얼마나 웃겼을까. 

이렇게 한 번 홀라당 날려버렸으면 정신을 차릴 법도 한데 또 비행기를 놓칠 뻔한 적이 있다. 때는 2019년. 코로나가 터기지 전 마지막 해외여행이었던 아일랜드 여행 때인데, 그때도 공항 리무진을 타고 가면서 매 분 매 초 같은 생각을 했다. "아 시간 애매하겠는걸?", "왜 기사님은 속도를 내질 않는 거지?" 공항에 도착하니 역시나 탑승수속이 끝나 있었다. 정확히 말하면 끝나는 중이었다. 그때 항공권이 아마 에어프랑스였을 텐데, 에어프랑스 승무원들이 탑승수속을 마무리하고 짐을 정리하고 있었다. 

*아 제발요, 저 놓치면 안 돼요. 어떻게 안 될까요?*

여행을 가고 싶다는 마음도 간절했지만, 또다시 비행기를 놓치는 불상사가 생기는 걸 막고 싶은 마음이 간절했다. 승무원들 입장에선 이게 뭔가 싶었을 거다. 지금 돌이켜 생각해 보니 엄청난 민폐였다. 감사하고 감사하게도 거룩한 마음을 지니신 승무원께서 처리를 해주었다. 다만 추가 수속이니만큼 짐이 제대로 가지 않을 수 있다고 얘기해 주었다. 당시 내 항공권은 인천에서 파리를 거쳐 더블린으로 가는 경로였는데, 파리에서 더블린으로 환승할 때 짐이 제대로 가지 않을 가능성이 있다는 거였다. 실제로 승무원의 경고대로 그 말은 현실이 되었다. 

## 4.

쓸데 없이 비행기 놓친 얘기만 주구장창 늘어놓고 있다. 
